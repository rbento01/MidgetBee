@model MidgetBee.Models.Animes

@{
    ViewData["Title"] = "Details";
}

<h1>@Html.DisplayFor(model => model.Nome)</h1>

<div>
    <div id="teste">
        @foreach (var item in Model.ListaDeReviews) {
            @item.Rating
            @item.Comentario
            @item.Utilizador.Email
        }
    </div>
    <div style="float:left; margin-right:20px;" class="form-group">
        <img src="~/fotos/@Html.DisplayFor(model => model.Fotografia)" width="200" alt="Fotografia do @Html.DisplayFor(model => model.Nome)" title="@Html.DisplayFor(model => model.Nome)" />
    </div>
    <div style="line-height:2;" class="form-group">
        <b>Name: </b> @Html.DisplayFor(model => model.Nome)<br />
        <b>Episodes: </b> @Html.DisplayFor(model => model.QuantEpisodios)<br />
        <b>Rating: </b> @Html.DisplayFor(model => model.Rating)<br />
        <b>Author: </b> @Html.DisplayFor(model => model.Autor)<br />
        <b>Studio: </b> @Html.DisplayFor(model => model.Estudio)<br />
        <b>Aired: </b> @Html.DisplayFor(model => model.Data)<br />
        <a style="font-weight:bold" href="@Html.DisplayFor(model => model.Links)"><b> Website</b></a><br />
        <b>Categories: </b> @Html.DisplayFor(model => model.Categoria)<br /><br />
    </div>
    <div class="form-group">
        <b>Sinopse:</b> @Html.DisplayFor(model => model.Sinopse)<br /><br />
    </div>



    @if (User.Identity.IsAuthenticated) {
        <div>
            @*  se não adicionarmos o atributo
                         enctype="multipart/form-data"
                não conseguimos enviar os ficheiros para o servidor *@
            <form asp-action="CreateComentario">
                <input type="hidden" name="animeID" value="@Model.IdAnime" />
                <span>Rating: </span><input required type="number" name="rating" min="1" max="10" text-align:center" maxlength="2" placeholder="1 a 10"><br /><br />
                <span>Comentário: </span><br />

                <textarea required name="comentario" style="resize:none; width:1100px; height:100px;"></textarea><br />
                <input type="submit" value="Add Comment" class="btn btn-primary" />
            </form>
        </div>
    }


</div>
<div>
    <br />
    <a asp-action="Edit" asp-route-id="@Model.IdAnime">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>

<script>
    var i = 1;
    function buttonClick() {
        var value = parseInt(document.getElementById('inc').value, 10);
        value = isNaN(value) ? 0 : value;
        value++;
        document.getElementById('inc').value = value;
        if (value >= @Html.DisplayFor(model => model.QuantEpisodios)) {
            value = @Html.DisplayFor(model => model.QuantEpisodios);
            document.getElementById('inc').value = value;
        }
    }
</script>